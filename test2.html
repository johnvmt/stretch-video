<!DOCTYPE html>
<html>
	<body>
		<script>
			var targetTime = 2500;
			var looptime = 4;
			var loopStart = new Date();
			var loopStartTime = loopStart.getTime();

			function startloop() {
				loopStart = new Date();
				loopStartTime = loopStart.getTime();
				runloop();
			}

			function runloop() {
				setTimeout(function() {
					var loopEnd = new Date();
					if(loopEnd.getTime() - loopStartTime >= targetTime)
						console.log("ENDED", loopEnd.getTime() - loopStartTime);
					else {
						console.log(loopEnd.getTime() - loopStartTime);
						runloop();
					}
				}, looptime);
			}

			startloop();

		</script>
	</body>
</html>
